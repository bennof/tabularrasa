var tabularrasa=function(){var get_json=function(t,e){get_data(t,function(t){e(JSON.parse(t))})},get_html=function(t,e){get_data(t,function(t){e.innerHTML=t,clean_code(e,"clean-code"),exec_js(e)})},exec_js=function(Elem){var elem=Elem.querySelectorAll("SCRIPT");elem.forEach(function(e){eval(e.innerText)})},get_data=function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(t){4==n.readyState&&(200==n.status?e(n.responseText):console.log("Error: ("+n.status+")"))},n.open("GET",t,!0),n.send()},EntityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},escape_html=function(t){return String(t).replace(/[&<>"'\/]/g,function(t){return EntityMap[t]})},clean_code=function(t){codeElem=t.querySelectorAll("[clean-code]"),codeElem.forEach(function(t){var e=escape_html(t.innerHTML);t.innerHTML=e})},start_router=function(){var t=document.querySelector("[html-router]");tabularrasa.get_html(window.location.hash.substring(1)+".html",t),window.onhashchange=function(){console.log("Hash: "+window.location.hash),tabularrasa.get_html(window.location.hash.substring(1)+".html",t)}},load_html_src=function(){document.querySelectorAll("[html-src]").forEach(function(t){Url=t.getAttribute("html-src"),console.log("Load html: "+Url),tabularrasa.get_html(Url,t)})},autocomplete=function(t,e){this.Search=document.querySelector(t),this.AC=null,this.Data=null,this.Link=e.url||"",this.Url=e.hint||"",this.Search.onkeyup=this.update.bind(this),document.onclick=this.delete.bind(this)};autocomplete.prototype.update=function(t){var e=this.Search.value;if(0<e.length)return get_json(this.Url+e,this.draw.bind(this)),void(null!=this.Data&&this.draw(this.Data));this.delete()},autocomplete.prototype.draw=function(t){this.Data=t;var e=this.Search.value;console.log(e);var n="<ul>",a=0;if(null!=this.Data)for(i=0;i<this.Data.length;i++)this.Data[i].substr(0,e.length).toLowerCase()==e.toLowerCase()&&(n+='<li><a href="'+this.Link+this.Data[i]+'"><strong>'+this.Data[i].substr(0,e.length)+"</strong>"+this.Data[i].substr(e.length)+"</li>",a++);if(console.log(n),0<a){if(n+="</ul>",null==this.AC){var o=document.createElement("div");o.classList.add("autocomplete"),this.Search.parentElement.appendChild(o),this.AC=o}this.AC.innerHTML=n}else this.delete()},autocomplete.prototype.delete=function(t){this.AC&&(this.AC.remove(),this.AC=null)};var popup=function(t,e){var n=document.querySelector("#popup_area"),a=document.createElement("DIV");a.className="popup",a.innerHTML=t,n.append(a);window.setTimeout(function(){n.removeChild(a)},e)};return{clean_code:clean_code,get_json:get_json,get_html:get_html,get_data:get_data,start_router:start_router,load_html_src:load_html_src,autocomplete:autocomplete,popup:popup}}();
//# sourceMappingURL=tr_min.js.map